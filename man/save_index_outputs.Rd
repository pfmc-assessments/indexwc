% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/save_index_outputs.R
\name{save_index_outputs}
\alias{save_index_outputs}
\title{Save index model outputs to disk}
\usage{
save_index_outputs(fit, diagnostics, indices, dir_main, overwrite = FALSE)
}
\arguments{
\item{fit}{An sdmTMB model object returned by \code{\link[=run_sdmtmb]{run_sdmtmb()}} with \code{dir_main = NULL}}

\item{diagnostics}{A list returned by \code{\link[=diagnose]{diagnose()}} with \code{dir = NULL}}

\item{indices}{A list returned by \code{\link[=calc_index_areas]{calc_index_areas()}} with \code{dir = NULL}}

\item{dir_main}{A string specifying the base directory where results will be saved.
The function will create a subdirectory structure based on species, survey, and
model family (same as \code{\link[=run_sdmtmb]{run_sdmtmb()}} creates when \code{dir_main} is specified)}

\item{overwrite}{Logical. If \code{TRUE}, existing files will be overwritten. Default is \code{FALSE}}
}
\description{
A convenience wrapper that takes the outputs from \code{\link[=run_sdmtmb]{run_sdmtmb()}}, \code{\link[=diagnose]{diagnose()}},
and \code{\link[=calc_index_areas]{calc_index_areas()}} when run with \code{dir = NULL} and writes them all to
disk in the same directory structure as the original indexwc code.
}
\details{
This function recreates the file structure that would have been created if you had
run \code{\link[=run_sdmtmb]{run_sdmtmb()}}, \code{\link[=diagnose]{diagnose()}}, and \code{\link[=calc_index_areas]{calc_index_areas()}} with directory arguments
specified from the start.

The directory structure created is:

\if{html}{\out{<div class="sourceCode">}}\preformatted{dir_main/
└── species_name/
    └── survey_name/
        └── family_name/
            ├── data/
            │   ├── data.rdata
            │   └── fit.rds
            ├── diagnostics/
            │   ├── mesh.png
            │   ├── sanity_data_frame.csv
            │   ├── aic_nll.txt
            │   ├── run_diagnostics_and_estimates.rdata
            │   ├── qq.png
            │   ├── residuals_1_*.png
            │   ├── residuals_2_*.png (if delta model)
            │   ├── anisotropy.png
            │   ├── fixed_effects.png
            │   ├── density_*.png
            │   ├── data_with_residuals.rdata
            │   └── predictions.rdata
            └── index/
                ├── est_by_area.csv
                ├── index_coastwide.png (if Coastwide calculated)
                └── index_all_areas.png
}\if{html}{\out{</div>}}
}
\examples{
\dontrun{
# Fit model without saving
fit <- run_sdmtmb(
  dir_main = NULL,
  data = my_data,
  family = sdmTMB::delta_gamma(),
  formula = catch_weight ~ 0 + fyear
)

# Run diagnostics without saving
diag <- diagnose(
  dir = NULL,
  fit = fit,
  prediction_grid = my_grid
)

# Calculate indices without saving
idx <- calc_index_areas(
  data = fit$data,
  fit = fit,
  prediction_grid = my_grid,
  dir = NULL,
  boundaries = c("Coastwide", "CA", "OR", "WA")
)

# Now save everything to disk
paths <- save_index_outputs(
  fit = fit,
  diagnostics = diag,
  indices = idx,
  dir_main = "~/my_indices"
)
}

}
\seealso{
\itemize{
\item \code{\link[=run_sdmtmb]{run_sdmtmb()}}, fit the model
\item \code{\link[=diagnose]{diagnose()}}, run diagnostics
\item \code{\link[=calc_index_areas]{calc_index_areas()}}, calculate indices
}
}
\author{
Chantel R. Wetzel
}
