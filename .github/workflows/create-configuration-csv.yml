
name: create-configuration-csv
# on specifies the build triggers. See more info at https://docs.github.com/en/actions/learn-github-actions/events-that-trigger-workflows
on:
  # this workflow runs on pushing to main, pull requests to main, and manually.
  push:
    path:
      'data/configuration.rda'

jobs:
  convert-data:
  runs-on: ubuntu-latest

  steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up R
      uses: r-lib/actions/setup-r@v2

    - name: Run R script to convert RDA to CSV
      run: Rscript data-raw/create_configuration_csv.R

    - name: Upload CSV artifact
      uses: actions/upload-artifact@v4
      with:
        name: converted-csv
        path: data-raw/configuration.csv # Path to the generated CSV file
